(this["webpackJsonpr3f-infinite-terrain"]=this["webpackJsonpr3f-infinite-terrain"]||[]).push([[0],{248:function(e,t,r){},249:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(60),c=r.n(i),o=r(22),u=r(255),s=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(u.a,{distance:45e4,sunPosition:[2.5,8,5],inclination:0,azimuth:.25}),a.a.createElement("hemisphereLight",{intensity:.4}),a.a.createElement("directionalLight",{castShadow:!0,position:[2.5,8,5],intensity:1.5,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10}))},m=r(10),l=r(7),f={rand_vect:function(){var e=2*Math.random()*Math.PI;return{x:Math.cos(e),y:Math.sin(e)}},dot_prod_grid:function(e,t,r,n){var a,i=e-r,c=t-n;return this.gradients[[r,n]]?a=this.gradients[[r,n]]:(a=this.rand_vect(),this.gradients[[r,n]]=a),i*a.x+c*a.y},smootherstep:function(e){return 6*Math.pow(e,5)-15*Math.pow(e,4)+10*Math.pow(e,3)},interp:function(e,t,r){return t+this.smootherstep(e)*(r-t)},seed:function(){this.gradients={}},memory:{},get:function(e,t){if(this.memory.hasOwnProperty([e,t]))return this.memory[[e,t]];var r=Math.floor(e),n=Math.floor(t),a=this.dot_prod_grid(e,t,r,n),i=this.dot_prod_grid(e,t,r+1,n),c=this.dot_prod_grid(e,t,r,n+1),o=this.dot_prod_grid(e,t,r+1,n+1),u=this.interp(e-r,a,i),s=this.interp(e-r,c,o),m=this.interp(t-n,u,s);return this.memory[[e,t]]=m,m}};f.seed();var h=r(21),p=r(250);function d(){var e=Object(o.b)("Water Level",{type:"number",value:-.5,min:-5,max:5}),t=Object(p.f)((function(){return{position:[0,e,0],rotation:[-Math.PI/2,0,0],args:[1e4,1e4,32,32]}})),r=Object(m.a)(t,2),n=r[0];r[1];return Object(h.b)((function(){n.current.position.y=e})),a.a.createElement("mesh",{ref:n,receiveShadow:!0},a.a.createElement("planeBufferGeometry",{attach:"geometry",args:[1e4,1e4,32,32]}),a.a.createElement("meshStandardMaterial",{attach:"material",color:"#010178",side:l.DoubleSide,transparent:!0,opacity:.5}))}var b=function(e){var t=Object(o.b)("Canyons",{type:"boolean",value:!1}),r=Object(o.b)("Wireframe",{type:"boolean",value:!0}),n=Object(o.b)("Map Size",{type:"number",value:60,min:10,max:60}),i=Object(o.b)("Vertices",{type:"number",value:30,min:10,max:100}),c=Object(o.b)("Amplitude",{type:"number",value:9.25,min:0,max:50}),u=Object(o.b)("Length",{type:"number",value:.03,min:0,max:.5}),s=Object(o.b)("X-Shift",{type:"number",value:0,min:-5,max:5}),d=Object(o.b)("Y-Shift",{type:"number",value:0,min:-5,max:5}),b=new l.PlaneGeometry(n,n,i,i),y=new l.MeshBasicMaterial({color:"grey",side:l.DoubleSide,wireframe:r}),j=Object(p.e)((function(){return{mass:0,type:"Dynamic",rotation:[Math.PI/2,0,Math.PI/2],position:[0,0,0],args:[b.vertices,b.faces]}})),v=Object(m.a)(j,1)[0];return Object(h.b)((function(){})),function(e,t,r,n,a,i){e.vertices.map((function(e){var c=t*f.get(r*e.x+a,r*e.y+i);n&&(c+=Math.floor(c)),e.z=c}))}(b,c,u,t,s,d),a.a.createElement("mesh",Object.assign({ref:v,args:[b,y]},e,{castShadow:!0,receiveShadow:!0}))},y=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(b,{rotation:[Math.PI/2,0,Math.PI/2]}),a.a.createElement(d,null))},j=r(38),v=Object(n.forwardRef)((function(e,t){var r=e.STATS,a=e.api,i=e.C,c=i.forward,o=i.backward,u=i.left,s=i.right,m=i.jump,f=i.run,p=Object(n.useRef)([0,0,0]),d=Object(n.useRef)([0,0,0]),b=Object(n.useRef)(),y=new l.Vector3,j=new l.Vector3,v=new l.Vector3,w=new l.Euler,g=function(){j.set(0,0,o-c),v.set(u-s,0,0),w.set(0,0,0);var t=r.speed;u||s?t=r.pan_speed():f&&(t=r.run_speed()),y.subVectors(j,v).normalize().multiplyScalar(t).applyEuler(e.camera.rotation),p.current[0]-=p.current[0]/r.inertia,p.current[2]-=p.current[2]/r.inertia;var n=[p.current[0]+y.x/r.inertia,p.current[1],p.current[2]+y.z/r.inertia];d.current[1]<1&&(a.velocity.set(n[0],n[1],n[2]),m||(b.current=!1),m&&!b.current&&(b.current=!0,a.velocity.set(n[0],r.jump_height(),n[2])))};return Object(n.useEffect)((function(){a.velocity.subscribe((function(e){return p.current=e})),a.position.subscribe((function(e){return d.current=e}))}),[]),Object(h.b)((function(){g()})),null})),w=r(254),g=Object(n.forwardRef)((function(e,t){return Object(h.b)((function(){!function(){var r=t.current.position;e.camera.position.y=r.y+e.STATS.player_height,e.camera.position.x=r.x,e.camera.position.z=r.z}()})),a.a.createElement(w.a,null)})),O=r(12);function E(e){var t={speed:5,player_height:2.5,run_speed:function(){return 2*t.speed},pan_speed:function(){return.6*t.speed},jump_height:function(){return 3*t.player_height},inertia:5},r=Object(p.d)((function(){return Object(j.a)({mass:1,type:"Dynamic",position:[0,t.player_height,0],size:[1,32,32]},e)})),i=Object(m.a)(r,2),c=i[0],o=i[1],u=Object(h.c)().camera,s=function(){var e=Object(n.useState)({forward:!1,backward:!1,left:!1,right:!1,jump:!1,run:!1}),t=Object(m.a)(e,2),r=t[0],a=t[1],i={KeyW:"forward",KeyS:"backward",KeyA:"left",KeyD:"right",Space:"jump",ShiftLeft:"run"},c=function(e){return i[e]};return Object(n.useEffect)((function(){var e=function(e){return a((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(O.a)({},c(e.code),!0))}))},t=function(e){return a((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(O.a)({},c(e.code),!1))}))};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),r}(),l=s.forward,f=s.backward,d=s.left,b=s.right,y=s.jump,w=s.run;return a.a.createElement("group",null,a.a.createElement(g,{ref:c,STATS:t,camera:u}),a.a.createElement(v,{ref:c,api:o,STATS:t,camera:u,C:{forward:l,backward:f,left:d,right:b,jump:y,run:w}}))}r(248);function S(){return a.a.createElement(o.a.Provider,null,a.a.createElement(o.a.Canvas,{shadowMap:!0,gl:{alpha:!1},camera:{position:[30,20,30],fov:90}},a.a.createElement(s,null),a.a.createElement(p.a,null,a.a.createElement(E,null),a.a.createElement(y,null))),a.a.createElement(o.a,null))}c.a.render(a.a.createElement(S,null),document.getElementById("root"))}},[[249,1,2]]]);
//# sourceMappingURL=main.0d8213e2.chunk.js.map